# 离岗和聚集检测模块

这个目录包含了所有与离岗检测和人员聚集检测相关的文件。

## 文件说明

### 1. leave.py
- 专门用于离岗检测功能
- 监控指定区域内是否长时间无人
- 默认阈值：5秒
- 当检测到离岗情况时会触发警报并保存截图

### 2. main.py
- 专门用于人员聚集检测功能
- 监控指定区域内人员数量是否超过阈值
- 默认阈值：5人
- 当检测到人员聚集时会触发警报并保存截图

### 3. whole.py
- 综合检测系统，同时包含离岗检测和人员聚集检测功能
- 使用两个独立的ROI区域分别进行监控：
  - 离岗检测区（默认为画面左侧区域）
  - 聚集检测区（默认为画面右侧区域）
- 分别设置阈值：
  - 离岗检测：10秒
  - 聚集检测：5人

## 使用方法

### 运行离岗检测
```bash
python leave_gather_detection/leave.py
```

### 运行聚集检测
```bash
python leave_gather_detection/main.py
```

### 运行综合检测
```bash
python leave_gather_detection/whole.py
```

## 配置说明

所有脚本中的关键参数都可以直接在代码中修改：

1. **视频路径** - `video_path` 变量
2. **ROI区域** - `ROI` 变量（包含区域的顶点坐标）
3. **检测阈值** - `离岗阈值` 或 `聚集阈值` 变量
4. **输出设置** - `save_result` 和 `output_video_path` 变量

## 输出结果

1. **控制台输出** - 处理进度和警报信息
2. **警报截图** - 保存在 `alert_screenshots` 目录中
3. **处理视频** - 生成标注后的视频文件（如果启用保存功能）